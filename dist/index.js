!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).ffmpegWebworker={})}(this,function(e){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(n);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)}(this,r?(e=o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function c(){importScripts("https://cdn.rawgit.com/bgrins/videoconverter.js/master/build/ffmpeg-all-codecs.js");var n=Date.now;function r(e){postMessage({type:"stdout",data:e})}onmessage=function(e){var t=e.data;"command"===t.type&&(e={print:r,printErr:r,files:t.files||[],arguments:t.arguments||[],TOTAL_MEMORY:t.totalMemory||33554432},postMessage({type:"start",data:e.arguments.join(" ")}),postMessage({type:"stdout",data:"Received command: "+e.arguments.join(" ")+(e.TOTAL_MEMORY?".  Processing with "+e.TOTAL_MEMORY+" bits.":"")}),t=n(),e=ffmpeg_run(e),t=n()-t,postMessage({type:"stdout",data:"Finished processing (took "+t+"ms)"}),postMessage({type:"done",data:e,time:t}))},postMessage({type:"ready"})}var t,n,r=(function(e){(e=e).default=function t(e){if(function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),"function"!=typeof e)throw new Error("File content must export a function");e=e.toString(),e=new Blob(["("+e+")()"],{type:"application/javascript"});return new Worker(URL.createObjectURL(e))},Object.defineProperty(e,"__esModule",{value:!0})}((t={exports:{}},t.exports)),t.exports),l=(n=r)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;function p(){}function h(){h.init.call(this)}function d(e){return void 0===e._maxListeners?h.defaultMaxListeners:e._maxListeners}function y(e,t,n,r){var o,i;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener||n),o=e._events),i=o[t]):(o=e._events=new p,e._eventsCount=0),i?("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),i.warned||(r=d(e))&&0<r&&i.length>r&&(i.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=i.length,r=r,"function"==typeof console.warn?console.warn(r):console.log(r))):(i=o[t]=n,++e._eventsCount),e}function v(e,t,n){var r=!1;function o(){e.removeListener(t,o),r||(r=!0,n.apply(e,arguments))}return o.listener=n,o}function m(e){var t=this._events;if(t){e=t[e];if("function"==typeof e)return 1;if(e)return e.length}return 0}function w(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}p.prototype=Object.create(null),(h.EventEmitter=h).usingDomains=!1,h.prototype.domain=void 0,h.prototype._events=void 0,h.prototype._maxListeners=void 0,h.defaultMaxListeners=10,h.init=function(){this.domain=null,h.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new p,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},h.prototype.getMaxListeners=function(){return d(this)},h.prototype.emit=function(e){var t,n,r,o="error"===e,i=this._events;if(i)o=o&&null==i.error;else if(!o)return!1;if(s=this.domain,o){if(o=arguments[1],s)return(o=o||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,o.domain=s,o.domainThrown=!1,s.emit("error",o),!1;if(o instanceof Error)throw o;var s=new Error('Uncaught, unspecified "error" event. ('+o+")");throw s.context=o,s}if(!(t=i[e]))return!1;var u,a="function"==typeof t;switch(u=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,o=w(e,r),i=0;i<r;++i)o[i].call(n)}(t,a,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=w(e,o),s=0;s<o;++s)i[s].call(n,r)}(t,a,this,arguments[1]);break;case 3:!function(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,s=w(e,i),u=0;u<i;++u)s[u].call(n,r,o)}(t,a,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var s=e.length,u=w(e,s),a=0;a<s;++a)u[a].call(n,r,o,i)}(t,a,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(u-1),r=1;r<u;r++)n[r-1]=arguments[r];!function(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=w(e,o),s=0;s<o;++s)i[s].apply(n,r)}(t,a,this,n)}return!0},h.prototype.on=h.prototype.addListener=function(e,t){return y(this,e,t,!1)},h.prototype.prependListener=function(e,t){return y(this,e,t,!0)},h.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,v(this,e,t)),this},h.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,v(this,e,t)),this},h.prototype.removeListener=function(e,t){var n,r,o,i,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new p:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length;0<i--;)if(n[i]===t||n[i].listener&&n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new p,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o);r.removeListener&&this.emit("removeListener",e,s||t)}return this},h.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=new p,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new p:delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new p,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(;this.removeListener(e,t[t.length-1]),t[0];);return this},h.prototype.listeners=function(e){var t=this._events,n=t&&(n=t[e])?"function"==typeof n?[n.listener||n]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(n):[];return n},h.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},h.prototype.listenerCount=m,h.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var g=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,h);var e,t,n,r=f(o);function o(){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),u(a(s=r.call(this)),"_worker",{}),u(a(s),"_inputFile",{}),u(a(s),"workerIsReady",!1),u(a(s),"readFileAsBufferArray",function(r){return new Promise(function(e,t){var n=new FileReader;n.onload=function(){e(this.result)},n.onerror=function(){t(this.error)},n.readAsArrayBuffer(r)})}),u(a(s),"runCommand",function(o){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:33554432;if("string"!=typeof o||!o.length)throw new Error("command should be string and not empty");s.inputFile&&s.inputFile.type?s.convertInputFileToArrayBuffer().then(function(e){for(;!s.workerIsReady;);var t=function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}("iVBORw0KGgoAAAANSUhEUgAAAAIAAAABCAMAAADD/I+4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////AAAAVcLTfgAAAAF0Uk5TAEDm2GYAAAANSURBVHjaYmBgAAgwAAADAAHTY1G2AAAAAElFTkSuQmCC");o="-loop 1 -i img.png"+o;var n="video-".concat(Date.now(),".mp3"),r="-i ".concat(n," ").concat(o);console.log("inputCommand",r),_this.worker.postMessage({type:"command",arguments:r.split(" "),files:[{data:new Uint8Array(e),name:n},{data:new Uint8Array(t),name:"img.png"}],totalMemory:i})}):s.worker.postMessage({type:"command",arguments:o.split(" "),totalMemory:i})}),u(a(s),"log",function(e){return Array.isArray(e)?console.log.call(null,e):console.log(e)}),u(a(s),"isVideo",function(e){var t=e.type;return e instanceof Blob&&(t.includes("video")||t.includes("audio"))}),s.initWebWorker(),s}return e=o,(t=[{key:"initWebWorker",value:function(){var n=this;this.worker=new l(c),this.log;var r=this.worker.onmessage=function(e){var t=e.data;e&&e.type&&("ready"==t.type?(n.emit("onReady","ffmpeg-asm.js file has been loaded."),n.workerIsReady=!0):"stdout"==t.type?n.emit("onStdout",t.data):"start"==t.type?(n.emit("onFileReceived","File Received"),r("file received ffmpeg command.")):"done"==t.type&&n.emit("onDone",t.data))}}},{key:"worker",get:function(){return this._worker},set:function(e){this._worker=e}},{key:"inputFile",get:function(){return this._inputFile},set:function(e){if(!this.isVideo(e))throw new Error("Input file is expected to be an audio or a video");this._inputFile=e}},{key:"inputFileExists",value:function(){var e=this.inputFile;return!!(e&&e instanceof Blob&&e.size&&e.type)}},{key:"convertInputFileToArrayBuffer",value:function(){if(!this.inputFileExists())throw new Error("Input File has not been set");return this.readFileAsBufferArray(this.inputFile)}}])&&i(e.prototype,t),n&&i(e,n),o}(),A=c,b=g,_={on:function(){},emit:function(){}},L=window,_=_=L&&L.Blob?new g:_;e.FFMPEGWebworker=A,e.FFMPEGWebworkerClient=b,e.default=_,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9GRk1QRUdXZWJXb3JrZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvd2Vid29ya2VyLWZpbGUvZGlzdC9pbmRleC5qcyIsIi4uL25vZGVfbW9kdWxlcy9yb2xsdXAtcGx1Z2luLW5vZGUtYnVpbHRpbnMvc3JjL2VzNi9ldmVudHMuanMiLCIuLi9zcmMvRkZNUEVHV2ViV29ya2VyQ2xpZW50LmpzIiwiLi4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHdvcmtlckZpbGUgPSAoKSA9PiB7XG4gIGNvbnN0IHdvcmtlclBhdGggPVxuICAgIFwiaHR0cHM6Ly9jZG4ucmF3Z2l0LmNvbS9iZ3JpbnMvdmlkZW9jb252ZXJ0ZXIuanMvbWFzdGVyL2J1aWxkL2ZmbXBlZy1hbGwtY29kZWNzLmpzXCI7XG5cbiAgaW1wb3J0U2NyaXB0cyh3b3JrZXJQYXRoKTtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3c7XG4gIGZ1bmN0aW9uIHByaW50KHRleHQpIHtcbiAgICBwb3N0TWVzc2FnZSh7IHR5cGU6IFwic3Rkb3V0XCIsIGRhdGE6IHRleHQgfSk7XG4gIH1cbiAgb25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZXZlbnQuZGF0YTtcbiAgICBpZiAobWVzc2FnZS50eXBlID09PSBcImNvbW1hbmRcIikge1xuICAgICAgY29uc3QgTW9kdWxlID0ge1xuICAgICAgICBwcmludDogcHJpbnQsXG4gICAgICAgIHByaW50RXJyOiBwcmludCxcbiAgICAgICAgZmlsZXM6IG1lc3NhZ2UuZmlsZXMgfHwgW10sXG4gICAgICAgIGFyZ3VtZW50czogbWVzc2FnZS5hcmd1bWVudHMgfHwgW10sXG4gICAgICAgIFRPVEFMX01FTU9SWTogbWVzc2FnZS50b3RhbE1lbW9yeSB8fCAzMzU1NDQzMlxuICAgICAgfTtcbiAgICAgIHBvc3RNZXNzYWdlKHsgdHlwZTogXCJzdGFydFwiLCBkYXRhOiBNb2R1bGUuYXJndW1lbnRzLmpvaW4oXCIgXCIpIH0pO1xuICAgICAgcG9zdE1lc3NhZ2Uoe1xuICAgICAgICB0eXBlOiBcInN0ZG91dFwiLFxuICAgICAgICBkYXRhOlxuICAgICAgICAgIFwiUmVjZWl2ZWQgY29tbWFuZDogXCIgK1xuICAgICAgICAgIE1vZHVsZS5hcmd1bWVudHMuam9pbihcIiBcIikgK1xuICAgICAgICAgIChNb2R1bGUuVE9UQUxfTUVNT1JZXG4gICAgICAgICAgICA/IFwiLiAgUHJvY2Vzc2luZyB3aXRoIFwiICsgTW9kdWxlLlRPVEFMX01FTU9SWSArIFwiIGJpdHMuXCJcbiAgICAgICAgICAgIDogXCJcIilcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdGltZSA9IG5vdygpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gZmZtcGVnX3J1bihNb2R1bGUpO1xuICAgICAgY29uc3QgdG90YWxUaW1lID0gbm93KCkgLSB0aW1lO1xuICAgICAgcG9zdE1lc3NhZ2Uoe1xuICAgICAgICB0eXBlOiBcInN0ZG91dFwiLFxuICAgICAgICBkYXRhOiBcIkZpbmlzaGVkIHByb2Nlc3NpbmcgKHRvb2sgXCIgKyB0b3RhbFRpbWUgKyBcIm1zKVwiXG4gICAgICB9KTtcbiAgICAgIHBvc3RNZXNzYWdlKHsgdHlwZTogXCJkb25lXCIsIGRhdGE6IHJlc3VsdCwgdGltZTogdG90YWxUaW1lIH0pO1xuICAgIH1cbiAgfTtcbiAgcG9zdE1lc3NhZ2UoeyB0eXBlOiBcInJlYWR5XCIgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB3b3JrZXJGaWxlO1xuIiwiIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/dChleHBvcnRzKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV4cG9ydHNcIl0sdCk6dCgoZT1lfHxzZWxmKS53ZWJ3b3JrZXJGaWxlPXt9KX0odGhpcyxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlLmRlZmF1bHQ9ZnVuY3Rpb24gZSh0KXtpZihmdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsZSksXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgRXJyb3IoXCJGaWxlIGNvbnRlbnQgbXVzdCBleHBvcnQgYSBmdW5jdGlvblwiKTt2YXIgbj10LnRvU3RyaW5nKCksbz1uZXcgQmxvYihbXCIoXCIrbitcIikoKVwiXSx7dHlwZTpcImFwcGxpY2F0aW9uL2phdmFzY3JpcHRcIn0pO3JldHVybiBuZXcgV29ya2VyKFVSTC5jcmVhdGVPYmplY3RVUkwobykpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lhVzVrWlhndWFuTWlMQ0p6YjNWeVkyVnpJanBiSWk0dUwzTnlZeTlwYm1SbGVDNXFjeUpkTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2V3lKbGVIQnZjblFnWkdWbVlYVnNkQ0JqYkdGemN5QlhaV0pYYjNKclpYSWdlMXh1SUNCamIyNXpkSEoxWTNSdmNpaDNiM0pyWlhJcElIdGNiaUFnSUNCcFppQW9kSGx3Wlc5bUlIZHZjbXRsY2lBaFBUMGdYQ0ptZFc1amRHbHZibHdpS1NCN1hHNGdJQ0FnSUNCMGFISnZkeUJ1WlhjZ1JYSnliM0lvWENKR2FXeGxJR052Ym5SbGJuUWdiWFZ6ZENCbGVIQnZjblFnWVNCbWRXNWpkR2x2Ymx3aUtUdGNiaUFnSUNCOVhHNGdJQ0FnWTI5dWMzUWdZMjlrWlNBOUlIZHZjbXRsY2k1MGIxTjBjbWx1WnlncE8xeHVJQ0FnSUdOdmJuTjBJR0pzYjJJZ1BTQnVaWGNnUW14dllpaGJYQ0lvWENJZ0t5QmpiMlJsSUNzZ1hDSXBLQ2xjSWwwc0lIdGNiaUFnSUNBZ0lIUjVjR1U2SUZ3aVlYQndiR2xqWVhScGIyNHZhbUYyWVhOamNtbHdkRndpWEc0Z0lDQWdmU2s3WEc0Z0lDQWdjbVYwZFhKdUlHNWxkeUJYYjNKclpYSW9WVkpNTG1OeVpXRjBaVTlpYW1WamRGVlNUQ2hpYkc5aUtTazdYRzRnSUgxY2JuMWNiaUpkTENKdVlXMWxjeUk2V3lKM2IzSnJaWElpTENKRmNuSnZjaUlzSW1OdlpHVWlMQ0owYjFOMGNtbHVaeUlzSW1Kc2IySWlMQ0pDYkc5aUlpd2lkSGx3WlNJc0lsZHZjbXRsY2lJc0lsVlNUQ0lzSW1OeVpXRjBaVTlpYW1WamRGVlNUQ0pkTENKdFlYQndhVzVuY3lJNkltOU9RVU5GTEZkQlFWbEJMREpIUVVOWkxHMUNRVUZZUVN4UlFVTklMRWxCUVVsRExFMUJRVTBzTWtOQlJWcERMRVZCUVU5R0xFVkJRVTlITEZkQlEyUkRMRVZCUVU4c1NVRkJTVU1zUzBGQlN5eERRVUZETEVsQlFVMUlMRVZCUVU4c1QwRkJVU3hEUVVNeFEwa3NTMEZCVFN4clEwRkZSQ3hKUVVGSlF5eFBRVUZQUXl4SlFVRkpReXhuUWtGQlowSk1JbjA9XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBkb21haW47XG5cbi8vIFRoaXMgY29uc3RydWN0b3IgaXMgdXNlZCB0byBzdG9yZSBldmVudCBoYW5kbGVycy4gSW5zdGFudGlhdGluZyB0aGlzIGlzXG4vLyBmYXN0ZXIgdGhhbiBleHBsaWNpdGx5IGNhbGxpbmcgYE9iamVjdC5jcmVhdGUobnVsbClgIHRvIGdldCBhIFwiY2xlYW5cIiBlbXB0eVxuLy8gb2JqZWN0ICh0ZXN0ZWQgd2l0aCB2OCB2NC45KS5cbmZ1bmN0aW9uIEV2ZW50SGFuZGxlcnMoKSB7fVxuRXZlbnRIYW5kbGVycy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIEV2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyk7XG59XG5leHBvcnQgZGVmYXVsdCBFdmVudEVtaXR0ZXI7XG5leHBvcnQge0V2ZW50RW1pdHRlcn07XG5cbi8vIG5vZGVqcyBvZGRpdHlcbi8vIHJlcXVpcmUoJ2V2ZW50cycpID09PSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXJcblxuRXZlbnRFbWl0dGVyLnVzaW5nRG9tYWlucyA9IGZhbHNlO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmRvbWFpbiA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5kb21haW4gPSBudWxsO1xuICBpZiAoRXZlbnRFbWl0dGVyLnVzaW5nRG9tYWlucykge1xuICAgIC8vIGlmIHRoZXJlIGlzIGFuIGFjdGl2ZSBkb21haW4sIHRoZW4gYXR0YWNoIHRvIGl0LlxuICAgIGlmIChkb21haW4uYWN0aXZlICYmICEodGhpcyBpbnN0YW5jZW9mIGRvbWFpbi5Eb21haW4pKSB7XG4gICAgICB0aGlzLmRvbWFpbiA9IGRvbWFpbi5hY3RpdmU7XG4gICAgfVxuICB9XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgdGhpcy5fZXZlbnRzID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50cykge1xuICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXJzKCk7XG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICB9XG5cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn07XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldE1heExpc3RlbmVycyhuKSB7XG4gIGlmICh0eXBlb2YgbiAhPT0gJ251bWJlcicgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJuXCIgYXJndW1lbnQgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uICRnZXRNYXhMaXN0ZW5lcnModGhhdCkge1xuICBpZiAodGhhdC5fbWF4TGlzdGVuZXJzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICByZXR1cm4gdGhhdC5fbWF4TGlzdGVuZXJzO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmdldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIGdldE1heExpc3RlbmVycygpIHtcbiAgcmV0dXJuICRnZXRNYXhMaXN0ZW5lcnModGhpcyk7XG59O1xuXG4vLyBUaGVzZSBzdGFuZGFsb25lIGVtaXQqIGZ1bmN0aW9ucyBhcmUgdXNlZCB0byBvcHRpbWl6ZSBjYWxsaW5nIG9mIGV2ZW50XG4vLyBoYW5kbGVycyBmb3IgZmFzdCBjYXNlcyBiZWNhdXNlIGVtaXQoKSBpdHNlbGYgb2Z0ZW4gaGFzIGEgdmFyaWFibGUgbnVtYmVyIG9mXG4vLyBhcmd1bWVudHMgYW5kIGNhbiBiZSBkZW9wdGltaXplZCBiZWNhdXNlIG9mIHRoYXQuIFRoZXNlIGZ1bmN0aW9ucyBhbHdheXMgaGF2ZVxuLy8gdGhlIHNhbWUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhbmQgdGh1cyBkbyBub3QgZ2V0IGRlb3B0aW1pemVkLCBzbyB0aGUgY29kZVxuLy8gaW5zaWRlIHRoZW0gY2FuIGV4ZWN1dGUgZmFzdGVyLlxuZnVuY3Rpb24gZW1pdE5vbmUoaGFuZGxlciwgaXNGbiwgc2VsZikge1xuICBpZiAoaXNGbilcbiAgICBoYW5kbGVyLmNhbGwoc2VsZik7XG4gIGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBsaXN0ZW5lcnNbaV0uY2FsbChzZWxmKTtcbiAgfVxufVxuZnVuY3Rpb24gZW1pdE9uZShoYW5kbGVyLCBpc0ZuLCBzZWxmLCBhcmcxKSB7XG4gIGlmIChpc0ZuKVxuICAgIGhhbmRsZXIuY2FsbChzZWxmLCBhcmcxKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5jYWxsKHNlbGYsIGFyZzEpO1xuICB9XG59XG5mdW5jdGlvbiBlbWl0VHdvKGhhbmRsZXIsIGlzRm4sIHNlbGYsIGFyZzEsIGFyZzIpIHtcbiAgaWYgKGlzRm4pXG4gICAgaGFuZGxlci5jYWxsKHNlbGYsIGFyZzEsIGFyZzIpO1xuICBlbHNlIHtcbiAgICB2YXIgbGVuID0gaGFuZGxlci5sZW5ndGg7XG4gICAgdmFyIGxpc3RlbmVycyA9IGFycmF5Q2xvbmUoaGFuZGxlciwgbGVuKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKVxuICAgICAgbGlzdGVuZXJzW2ldLmNhbGwoc2VsZiwgYXJnMSwgYXJnMik7XG4gIH1cbn1cbmZ1bmN0aW9uIGVtaXRUaHJlZShoYW5kbGVyLCBpc0ZuLCBzZWxmLCBhcmcxLCBhcmcyLCBhcmczKSB7XG4gIGlmIChpc0ZuKVxuICAgIGhhbmRsZXIuY2FsbChzZWxmLCBhcmcxLCBhcmcyLCBhcmczKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5jYWxsKHNlbGYsIGFyZzEsIGFyZzIsIGFyZzMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRNYW55KGhhbmRsZXIsIGlzRm4sIHNlbGYsIGFyZ3MpIHtcbiAgaWYgKGlzRm4pXG4gICAgaGFuZGxlci5hcHBseShzZWxmLCBhcmdzKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseShzZWxmLCBhcmdzKTtcbiAgfVxufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGV2ZW50cywgZG9tYWluO1xuICB2YXIgbmVlZERvbWFpbkV4aXQgPSBmYWxzZTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICBpZiAoZXZlbnRzKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT0gbnVsbCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBkb21haW4gPSB0aGlzLmRvbWFpbjtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgaWYgKGRvbWFpbikge1xuICAgICAgaWYgKCFlcilcbiAgICAgICAgZXIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQnKTtcbiAgICAgIGVyLmRvbWFpbkVtaXR0ZXIgPSB0aGlzO1xuICAgICAgZXIuZG9tYWluID0gZG9tYWluO1xuICAgICAgZXIuZG9tYWluVGhyb3duID0gZmFsc2U7XG4gICAgICBkb21haW4uZW1pdCgnZXJyb3InLCBlcik7XG4gICAgfSBlbHNlIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG4gICAgICBlcnIuY29udGV4dCA9IGVyO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBoYW5kbGVyID0gZXZlbnRzW3R5cGVdO1xuXG4gIGlmICghaGFuZGxlcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIGlzRm4gPSB0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJztcbiAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgc3dpdGNoIChsZW4pIHtcbiAgICAvLyBmYXN0IGNhc2VzXG4gICAgY2FzZSAxOlxuICAgICAgZW1pdE5vbmUoaGFuZGxlciwgaXNGbiwgdGhpcyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICBlbWl0T25lKGhhbmRsZXIsIGlzRm4sIHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM6XG4gICAgICBlbWl0VHdvKGhhbmRsZXIsIGlzRm4sIHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDpcbiAgICAgIGVtaXRUaHJlZShoYW5kbGVyLCBpc0ZuLCB0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSwgYXJndW1lbnRzWzNdKTtcbiAgICAgIGJyZWFrO1xuICAgIC8vIHNsb3dlclxuICAgIGRlZmF1bHQ6XG4gICAgICBhcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpO1xuICAgICAgZm9yIChpID0gMTsgaSA8IGxlbjsgaSsrKVxuICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGVtaXRNYW55KGhhbmRsZXIsIGlzRm4sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgaWYgKG5lZWREb21haW5FeGl0KVxuICAgIGRvbWFpbi5leGl0KCk7XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoIWV2ZW50cykge1xuICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzID0gbmV3IEV2ZW50SGFuZGxlcnMoKTtcbiAgICB0YXJnZXQuX2V2ZW50c0NvdW50ID0gMDtcbiAgfSBlbHNlIHtcbiAgICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAgIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgICBpZiAoZXZlbnRzLm5ld0xpc3RlbmVyKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKCFleGlzdGluZykge1xuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gICAgKyt0YXJnZXQuX2V2ZW50c0NvdW50O1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBwcmVwZW5kID8gW2xpc3RlbmVyLCBleGlzdGluZ10gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cbiAgICAgIGlmIChwcmVwZW5kKSB7XG4gICAgICAgIGV4aXN0aW5nLnVuc2hpZnQobGlzdGVuZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBpZiAoIWV4aXN0aW5nLndhcm5lZCkge1xuICAgICAgbSA9ICRnZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtcbiAgICAgIGlmIChtICYmIG0gPiAwICYmIGV4aXN0aW5nLmxlbmd0aCA+IG0pIHtcbiAgICAgICAgZXhpc3Rpbmcud2FybmVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgdHlwZSArICcgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQnKTtcbiAgICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICAgIHcuZW1pdHRlciA9IHRhcmdldDtcbiAgICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgICAgZW1pdFdhcm5pbmcodyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIGVtaXRXYXJuaW5nKGUpIHtcbiAgdHlwZW9mIGNvbnNvbGUud2FybiA9PT0gJ2Z1bmN0aW9uJyA/IGNvbnNvbGUud2FybihlKSA6IGNvbnNvbGUubG9nKGUpO1xufVxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTtcbiAgICB9O1xuXG5mdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgZmlyZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZygpIHtcbiAgICB0YXJnZXQucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG4gICAgaWYgKCFmaXJlZCkge1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgbGlzdGVuZXIuYXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHJldHVybiBnO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgdGhpcy5wcmVwZW5kTGlzdGVuZXIodHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4vLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHZhciBsaXN0LCBldmVudHMsIHBvc2l0aW9uLCBpLCBvcmlnaW5hbExpc3RlbmVyO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RlbmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmICghZXZlbnRzKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgbGlzdCA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmICghbGlzdClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCAobGlzdC5saXN0ZW5lciAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBvc2l0aW9uID0gLTE7XG5cbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8XG4gICAgICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGxpc3RbMF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKHR5cGUpIHtcbiAgICAgIHZhciBsaXN0ZW5lcnMsIGV2ZW50cztcblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKCFldmVudHMpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gICAgICBpZiAoIWV2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSkge1xuICAgICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGtleTsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgICAgLy8gTElGTyBvcmRlclxuICAgICAgICBkbyB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgfSB3aGlsZSAobGlzdGVuZXJzWzBdKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnModHlwZSkge1xuICB2YXIgZXZsaXN0ZW5lcjtcbiAgdmFyIHJldDtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoIWV2ZW50cylcbiAgICByZXQgPSBbXTtcbiAgZWxzZSB7XG4gICAgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcbiAgICBpZiAoIWV2bGlzdGVuZXIpXG4gICAgICByZXQgPSBbXTtcbiAgICBlbHNlIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgIHJldCA9IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdO1xuICAgIGVsc2VcbiAgICAgIHJldCA9IHVud3JhcExpc3RlbmVycyhldmxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsaXN0ZW5lckNvdW50LmNhbGwoZW1pdHRlciwgdHlwZSk7XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XG5mdW5jdGlvbiBsaXN0ZW5lckNvdW50KHR5cGUpIHtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG5cbiAgICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSBpZiAoZXZsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdC5vd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcbn07XG5cbi8vIEFib3V0IDEuNXggZmFzdGVyIHRoYW4gdGhlIHR3by1hcmcgdmVyc2lvbiBvZiBBcnJheSNzcGxpY2UoKS5cbmZ1bmN0aW9uIHNwbGljZU9uZShsaXN0LCBpbmRleCkge1xuICBmb3IgKHZhciBpID0gaW5kZXgsIGsgPSBpICsgMSwgbiA9IGxpc3QubGVuZ3RoOyBrIDwgbjsgaSArPSAxLCBrICs9IDEpXG4gICAgbGlzdFtpXSA9IGxpc3Rba107XG4gIGxpc3QucG9wKCk7XG59XG5cbmZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBpKSB7XG4gIHZhciBjb3B5ID0gbmV3IEFycmF5KGkpO1xuICB3aGlsZSAoaS0tKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuIiwiaW1wb3J0IFdvcmtlckZpbGUgZnJvbSBcIndlYndvcmtlci1maWxlXCI7XG5pbXBvcnQgd29ya2VyRmlsZSBmcm9tIFwiLi9GRk1QRUdXZWJXb3JrZXJcIjtcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gXCJldmVudHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRkZNUEVHV2Vid29ya2VyQ2xpZW50IGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgLyoqXG4gICAqIEB0eXBlIHtXb3JrZXJ9XG4gICAqL1xuICBfd29ya2VyID0ge307XG4gIC8qKlxuICAgKiBAdHlwZSB7QmxvYn1cbiAgICovXG4gIF9pbnB1dEZpbGUgPSB7fTtcblxuICAvKipcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICB3b3JrZXJJc1JlYWR5ID0gZmFsc2U7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pbml0V2ViV29ya2VyKCk7XG4gIH1cblxuICBpbml0V2ViV29ya2VyKCkge1xuICAgIHRoaXMud29ya2VyID0gbmV3IFdvcmtlckZpbGUod29ya2VyRmlsZSk7XG4gICAgdGhpcy5sb2c7XG4gICAgY29uc3QgbG9nID0gKHRoaXMud29ya2VyLm9ubWVzc2FnZSA9IGV2ZW50ID0+IHtcbiAgICAgIGxldCBtZXNzYWdlID0gZXZlbnQuZGF0YTtcbiAgICAgIGlmIChldmVudCAmJiBldmVudC50eXBlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT0gXCJyZWFkeVwiKSB7XG4gICAgICAgICAgdGhpcy5lbWl0KFwib25SZWFkeVwiLCBcImZmbXBlZy1hc20uanMgZmlsZSBoYXMgYmVlbiBsb2FkZWQuXCIpO1xuICAgICAgICAgIHRoaXMud29ya2VySXNSZWFkeSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09IFwic3Rkb3V0XCIpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJvblN0ZG91dFwiLCBtZXNzYWdlLmRhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PSBcInN0YXJ0XCIpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJvbkZpbGVSZWNlaXZlZFwiLCBcIkZpbGUgUmVjZWl2ZWRcIik7XG4gICAgICAgICAgbG9nKFwiZmlsZSByZWNlaXZlZCBmZm1wZWcgY29tbWFuZC5cIik7XG4gICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09IFwiZG9uZVwiKSB7XG4gICAgICAgICAgdGhpcy5lbWl0KFwib25Eb25lXCIsIG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHNldCB3b3JrZXIod29ya2VyKSB7XG4gICAgdGhpcy5fd29ya2VyID0gd29ya2VyO1xuICB9XG4gIGdldCB3b3JrZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dvcmtlcjtcbiAgfVxuXG4gIHNldCBpbnB1dEZpbGUoaW5wdXRGaWxlKSB7XG4gICAgaWYgKCF0aGlzLmlzVmlkZW8oaW5wdXRGaWxlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5wdXQgZmlsZSBpcyBleHBlY3RlZCB0byBiZSBhbiBhdWRpbyBvciBhIHZpZGVvXCIpO1xuICAgIH1cbiAgICB0aGlzLl9pbnB1dEZpbGUgPSBpbnB1dEZpbGU7XG4gIH1cbiAgZ2V0IGlucHV0RmlsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRGaWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIHVzZSB3b3JrZXIgdG8gZW5jb2RlIGF1ZGlvXG4gICAqIEBwYXJhbSB7QmxvYn0gZmlsZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5QnVmZmVyPn1cbiAgICovXG4gIHJlYWRGaWxlQXNCdWZmZXJBcnJheSA9IGZpbGUgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3VsdCk7XG4gICAgICB9O1xuICAgICAgZmlsZVJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZWplY3QodGhpcy5lcnJvcik7XG4gICAgICB9O1xuICAgICAgZmlsZVJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICB9KTtcbiAgfTtcblxuICBpbnB1dEZpbGVFeGlzdHMoKSB7XG4gICAgY29uc3QgaW5wdXRGaWxlID0gdGhpcy5pbnB1dEZpbGU7XG4gICAgcmV0dXJuICEhKFxuICAgICAgaW5wdXRGaWxlICYmXG4gICAgICBpbnB1dEZpbGUgaW5zdGFuY2VvZiBCbG9iICYmXG4gICAgICBpbnB1dEZpbGUuc2l6ZSAmJlxuICAgICAgaW5wdXRGaWxlLnR5cGVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIHVzZSB3b3JrZXIgdG8gZW5jb2RlIGF1ZGlvXG4gICAqIEBwYXJhbSB7QmxvYn0gaW5wdXRGaWxlXG4gICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXlCdWZmZXI+fVxuICAgKi9cbiAgY29udmVydElucHV0RmlsZVRvQXJyYXlCdWZmZXIoKSB7XG4gICAgaWYgKCF0aGlzLmlucHV0RmlsZUV4aXN0cygpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnB1dCBGaWxlIGhhcyBub3QgYmVlbiBzZXRcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlYWRGaWxlQXNCdWZmZXJBcnJheSh0aGlzLmlucHV0RmlsZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvbW1hbmRcbiAgICovXG4gIHJ1bkNvbW1hbmQgPSAoY29tbWFuZCwgdG90YWxNZW1vcnkgPSAzMzU1NDQzMikgPT4ge1xuICAgIGlmICh0eXBlb2YgY29tbWFuZCAhPT0gXCJzdHJpbmdcIiB8fCAhY29tbWFuZC5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImNvbW1hbmQgc2hvdWxkIGJlIHN0cmluZyBhbmQgbm90IGVtcHR5XCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pbnB1dEZpbGUgJiYgdGhpcy5pbnB1dEZpbGUudHlwZSkge1xuICAgICAgdGhpcy5jb252ZXJ0SW5wdXRGaWxlVG9BcnJheUJ1ZmZlcigpLnRoZW4oYXJyYXlCdWZmZXIgPT4ge1xuICAgICAgICB3aGlsZSAoIXRoaXMud29ya2VySXNSZWFkeSkgeyB9XG5cbiAgICAgICAgLy8gb2dcbiAgICAgICAgLy8gY29uc3QgZmlsZW5hbWUgPSBgdmlkZW8tJHtEYXRlLm5vdygpfS53ZWJtYDtcbiAgICAgICAgLy8gY29uc3QgaW5wdXRDb21tYW5kID0gYC1pICR7ZmlsZW5hbWV9ICR7Y29tbWFuZH1gO1xuICAgICAgICAvLyB0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgIC8vICAgdHlwZTogXCJjb21tYW5kXCIsXG4gICAgICAgIC8vICAgYXJndW1lbnRzOiBpbnB1dENvbW1hbmQuc3BsaXQoXCIgXCIpLFxuICAgICAgICAvLyAgIGZpbGVzOiBbXG4gICAgICAgIC8vICAgICB7XG4gICAgICAgIC8vICAgICAgIGRhdGE6IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKSxcbiAgICAgICAgLy8gICAgICAgbmFtZTogZmlsZW5hbWVcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gICBdLFxuICAgICAgICAvLyAgIHRvdGFsTWVtb3J5XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIF9iYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NCkge1xuICAgICAgICAgIHZhciBiaW5hcnlfc3RyaW5nID0gd2luZG93LmF0b2IoYmFzZTY0KTtcbiAgICAgICAgICB2YXIgbGVuID0gYmluYXJ5X3N0cmluZy5sZW5ndGg7XG4gICAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBieXRlc1tpXSA9IGJpbmFyeV9zdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGJ5dGVzLmJ1ZmZlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJBRCAxeDFweFxuICAgICAgICAvLyBjb25zdCBzbWFsbEltZ2I2NCA9IGBkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUjQybVA4ejhCUUR3QUVoUUdBaEttTUlRQUFBQUJKUlU1RXJrSmdnZz09YDtcblxuICAgICAgICAvLyA0MjB4MzYwcHhcbiAgICAgICAgLy8gY29uc3Qgc21hbGxJbWdiNjQgPSBgaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQWVBQUFBRkFDQU1BQUFCVEZsOUpBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQUFaUVRGUkYvLy8vQUFBQVZjTFRmZ0FBQUFGMFVrNVRBRURtMkdZQUFBQ3ZTVVJCVkhqYTdNRXhBUUFBQU1LZzlVOXREUStnQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQStUWUFCQUZsZUFBSElBWmlIQUFBQUFFbEZUa1N1UW1DQ2A7XG5cbiAgICAgICAgLy8gNHgzcHhcbiAgICAgICAgLy8gY29uc3Qgc21hbGxJbWdiNjQgPSBgaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFRQUFBQURDQU1BQUFDREtsNzBBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQUFaUVRGUkYvLy8vQUFBQVZjTFRmZ0FBQUFGMFVrNVRBRURtMkdZQUFBQU9TVVJCVkhqYVltQkFBUUFCQmdBQUR3QUIxS2d5dkFBQUFBQkpSVTVFcmtKZ2dnPT1gO1xuXG4gICAgICAgIC8vIDJ4MXB4IHBuZ1xuICAgICAgICBjb25zdCBzbWFsbEltZ2I2NCA9IGBpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUlBQUFBQkNBTUFBQUREL0krNEFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBQVpRVEZSRi8vLy9BQUFBVmNMVGZnQUFBQUYwVWs1VEFFRG0yR1lBQUFBTlNVUkJWSGphWW1CZ0FBZ3dBQUFEQUFIVFkxRzJBQUFBQUVsRlRrU3VRbUNDYDtcblxuICAgICAgICAvLyBCQUQgLSAxeDFweCBwbmcgZG9lc250IHdvcmsuLi5cbiAgICAgICAgLy8gY29uc3Qgc21hbGxJbWdiNjQgPSBgaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQU1BQUFBb3l6UzdBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQUFaUVRGUkYvLy8vQUFBQVZjTFRmZ0FBQUFGMFVrNVRBRURtMkdZQUFBQU1TVVJCVkhqYVltQUFDREFBQUFJQUFVOXRXZUVBQUFBQVNVVk9SSzVDWUlJPWA7XG5cbiAgICAgICAgY29uc3QgaW1nQXJyQnVmZiA9IF9iYXNlNjRUb0FycmF5QnVmZmVyKHNtYWxsSW1nYjY0KTtcblxuICAgICAgICBjb25zdCBjdXN0b20gPSBgLWxvb3AgMSAtaSBpbWcucG5nYFxuICAgICAgICBjb21tYW5kID0gY3VzdG9tICsgY29tbWFuZDtcbiAgICAgICAgLy8gdmFyIGZpbGVuYW1lID0gXCJ2aWRlby1cIi5jb25jYXQoRGF0ZS5ub3coKSwgXCIud2VibVwiKTtcbiAgICAgICAgdmFyIGZpbGVuYW1lID0gXCJ2aWRlby1cIi5jb25jYXQoRGF0ZS5ub3coKSwgXCIubXAzXCIpO1xuICAgICAgICB2YXIgaW5wdXRDb21tYW5kID0gXCItaSBcIi5jb25jYXQoZmlsZW5hbWUsIFwiIFwiKS5jb25jYXQoY29tbWFuZCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ2lucHV0Q29tbWFuZCcsIGlucHV0Q29tbWFuZCk7XG5cbiAgICAgICAgX3RoaXMud29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICB0eXBlOiBcImNvbW1hbmRcIixcbiAgICAgICAgICBhcmd1bWVudHM6IGlucHV0Q29tbWFuZC5zcGxpdChcIiBcIiksXG4gICAgICAgICAgZmlsZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZGF0YTogbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpLFxuICAgICAgICAgICAgICBuYW1lOiBmaWxlbmFtZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZGF0YTogbmV3IFVpbnQ4QXJyYXkoaW1nQXJyQnVmZiksXG4gICAgICAgICAgICAgIG5hbWU6ICdpbWcucG5nJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgdG90YWxNZW1vcnk6IHRvdGFsTWVtb3J5XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogXCJjb21tYW5kXCIsXG4gICAgICAgIGFyZ3VtZW50czogY29tbWFuZC5zcGxpdChcIiBcIiksXG4gICAgICAgIHRvdGFsTWVtb3J5XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7U3RyaW5nIHwgQXJyYXk8U3RyaW5nPn0gbWVzc2FnZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgbG9nID0gbWVzc2FnZSA9PlxuICAgIEFycmF5LmlzQXJyYXkobWVzc2FnZSlcbiAgICAgID8gY29uc29sZS5sb2cuY2FsbChudWxsLCBtZXNzYWdlKVxuICAgICAgOiBjb25zb2xlLmxvZyhtZXNzYWdlKTtcblxuICAvKipcbiAgICogQHBhcmFtIHtCbG9ifSBmaWxlXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBpc1ZpZGVvID0gZmlsZSA9PiB7XG4gICAgY29uc3QgZmlsZVR5cGUgPSBmaWxlLnR5cGU7XG4gICAgcmV0dXJuIChcbiAgICAgIGZpbGUgaW5zdGFuY2VvZiBCbG9iICYmXG4gICAgICAoZmlsZVR5cGUuaW5jbHVkZXMoXCJ2aWRlb1wiKSB8fCBmaWxlVHlwZS5pbmNsdWRlcyhcImF1ZGlvXCIpKVxuICAgICk7XG4gIH07XG59XG4iLCJpbXBvcnQgV2Vid29ya2VyQ2xpZW50IGZyb20gXCIuL0ZGTVBFR1dlYldvcmtlckNsaWVudFwiO1xuaW1wb3J0IFdlYndvcmtlciBmcm9tIFwiLi9GRk1QRUdXZWJXb3JrZXJcIjtcblxuZXhwb3J0IGNvbnN0IEZGTVBFR1dlYndvcmtlciA9IFdlYndvcmtlcjtcbmV4cG9ydCBjb25zdCBGRk1QRUdXZWJ3b3JrZXJDbGllbnQgPSBXZWJ3b3JrZXJDbGllbnQ7XG5sZXQgd29ya2VyQ2xpZW50ID0geyBvbigpIHsgfSwgZW1pdCgpIHsgfSB9O1xuLy8gY29uc3QgX3dpbmRvdyA9IGdsb2JhbCB8fCB3aW5kb3c7XG52YXIgX3dpbmRvdyA9IHdpbmRvdztcbmlmIChfd2luZG93ICYmIF93aW5kb3cuQmxvYikge1xuICB3b3JrZXJDbGllbnQgPSBuZXcgV2Vid29ya2VyQ2xpZW50KCk7XG59XG5leHBvcnQgZGVmYXVsdCB3b3JrZXJDbGllbnQ7XG4iXSwibmFtZXMiOlsid29ya2VyRmlsZSIsImltcG9ydFNjcmlwdHMiLCJub3ciLCJEYXRlIiwicHJpbnQiLCJ0ZXh0IiwicG9zdE1lc3NhZ2UiLCJ0eXBlIiwiZGF0YSIsIm9ubWVzc2FnZSIsImV2ZW50IiwibWVzc2FnZSIsIk1vZHVsZSIsInByaW50RXJyIiwiZmlsZXMiLCJhcmd1bWVudHMiLCJUT1RBTF9NRU1PUlkiLCJ0b3RhbE1lbW9yeSIsImpvaW4iLCJ0aW1lIiwicmVzdWx0IiwiZmZtcGVnX3J1biIsInRvdGFsVGltZSIsImUiLCJleHBvcnRzIiwiZGVmYXVsdCIsInQiLCJUeXBlRXJyb3IiLCJ0aGlzIiwiRXJyb3IiLCJuIiwidG9TdHJpbmciLCJvIiwiQmxvYiIsIldvcmtlciIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJFdmVudEhhbmRsZXJzIiwiRXZlbnRFbWl0dGVyIiwiaW5pdCIsImNhbGwiLCIkZ2V0TWF4TGlzdGVuZXJzIiwidGhhdCIsInVuZGVmaW5lZCIsIl9tYXhMaXN0ZW5lcnMiLCJkZWZhdWx0TWF4TGlzdGVuZXJzIiwiX2FkZExpc3RlbmVyIiwidGFyZ2V0IiwibGlzdGVuZXIiLCJwcmVwZW5kIiwiZXZlbnRzIiwiZXhpc3RpbmciLCJfZXZlbnRzIiwibmV3TGlzdGVuZXIiLCJlbWl0IiwiX2V2ZW50c0NvdW50IiwidW5zaGlmdCIsInB1c2giLCJ3YXJuZWQiLCJtIiwibGVuZ3RoIiwidyIsIm5hbWUiLCJlbWl0dGVyIiwiY291bnQiLCJjb25zb2xlIiwid2FybiIsImxvZyIsIl9vbmNlV3JhcCIsImZpcmVkIiwiZyIsInJlbW92ZUxpc3RlbmVyIiwiYXBwbHkiLCJsaXN0ZW5lckNvdW50IiwiZXZsaXN0ZW5lciIsImFycmF5Q2xvbmUiLCJhcnIiLCJpIiwiY29weSIsIkFycmF5IiwicHJvdG90eXBlIiwiY3JlYXRlIiwidXNpbmdEb21haW5zIiwiZG9tYWluIiwiYWN0aXZlIiwiZ2V0UHJvdG90eXBlT2YiLCJzZXRNYXhMaXN0ZW5lcnMiLCJpc05hTiIsImdldE1heExpc3RlbmVycyIsImhhbmRsZXIiLCJhcmdzIiwiZG9FcnJvciIsImVycm9yIiwiZXIiLCJkb21haW5FbWl0dGVyIiwiZG9tYWluVGhyb3duIiwiZXJyIiwiY29udGV4dCIsImxlbiIsImlzRm4iLCJzZWxmIiwibGlzdGVuZXJzIiwiZW1pdE5vbmUiLCJhcmcxIiwiZW1pdE9uZSIsImFyZzIiLCJlbWl0VHdvIiwiYXJnMyIsImVtaXRUaHJlZSIsImVtaXRNYW55Iiwib24iLCJhZGRMaXN0ZW5lciIsInByZXBlbmRMaXN0ZW5lciIsIm9uY2UiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdCIsInBvc2l0aW9uIiwib3JpZ2luYWxMaXN0ZW5lciIsImluZGV4IiwiayIsInBvcCIsInNwbGljZU9uZSIsInJlbW92ZUFsbExpc3RlbmVycyIsImtleSIsImtleXMiLCJyZXQiLCJ1bndyYXBMaXN0ZW5lcnMiLCJldmVudE5hbWVzIiwiUmVmbGVjdCIsIm93bktleXMiLCJGRk1QRUdXZWJ3b3JrZXJDbGllbnQiLCJmaWxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmaWxlUmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsIm9uZXJyb3IiLCJyZWFkQXNBcnJheUJ1ZmZlciIsImNvbW1hbmQiLCJfdGhpczIiLCJpbnB1dEZpbGUiLCJjb252ZXJ0SW5wdXRGaWxlVG9BcnJheUJ1ZmZlciIsInRoZW4iLCJhcnJheUJ1ZmZlciIsIndvcmtlcklzUmVhZHkiLCJpbWdBcnJCdWZmIiwiYmFzZTY0IiwiYmluYXJ5X3N0cmluZyIsIndpbmRvdyIsImF0b2IiLCJieXRlcyIsIlVpbnQ4QXJyYXkiLCJjaGFyQ29kZUF0IiwiYnVmZmVyIiwiX2Jhc2U2NFRvQXJyYXlCdWZmZXIiLCJmaWxlbmFtZSIsImNvbmNhdCIsImlucHV0Q29tbWFuZCIsIl90aGlzIiwid29ya2VyIiwic3BsaXQiLCJpc0FycmF5IiwiZmlsZVR5cGUiLCJpbmNsdWRlcyIsImluaXRXZWJXb3JrZXIiLCJXb3JrZXJGaWxlIiwiX3RoaXMzIiwiX3dvcmtlciIsIl9pbnB1dEZpbGUiLCJpc1ZpZGVvIiwic2l6ZSIsImlucHV0RmlsZUV4aXN0cyIsInJlYWRGaWxlQXNCdWZmZXJBcnJheSIsIkZGTVBFR1dlYndvcmtlciIsIldlYndvcmtlciIsIldlYndvcmtlckNsaWVudCIsIndvcmtlckNsaWVudCIsIl93aW5kb3ciXSwibWFwcGluZ3MiOiJ1NENBQW1CLFNBQWJBLElBSUpDLGNBRkUseUZBR0lDLEVBQU1DLEtBQUtELGFBQ1JFLEVBQU1DLEdBQ2JDLFlBQVksQ0FBRUMsS0FBTSxTQUFVQyxLQUFNSCxJQUV0Q0ksVUFBWSxTQUFTQyxPQUNiQyxFQUFVRCxFQUFNRixLQUNELFlBQWpCRyxFQUFRSixPQUNKSyxFQUFTLENBQ2JSLE1BQU9BLEVBQ1BTLFNBQVVULEVBQ1ZVLE1BQU9ILEVBQVFHLE9BQVMsR0FDeEJDLFVBQVdKLEVBQVFJLFdBQWEsR0FDaENDLGFBQWNMLEVBQVFNLGFBQWUsVUFFdkNYLFlBQVks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
